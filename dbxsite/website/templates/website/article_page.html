{% extends 'website/base.html' %}
{% block title %}
    {{ article.title }}
{% endblock %}
{% block body_content %}
    <div class="container">
        <div class="row">
            <div class="h1">{{ article.title }}</div>
        </div>
        <div class="row">
            <p class="col-md-9">阅读：{{ article.access_count }}</p>
            <p class="col-md-3">发布时间：{{ article.publish_time }}</p>
        </div>
        <div class="row tag-div">
            {% for tag in article.tags.all %}
                <span class="label label-success">{{ tag.name }}</span>
            {% endfor %}
        </div>
        <div class="row">
            <div class="col-md-12" style="background-color: gainsboro"></div>
        </div>
        <div class="row">
            <div class="article-content">{{ article.content|safe }}</div>
        </div>
        <br/>
    {% if request.user.is_active %}
        <div class="row">
            <a class="btn btn-default" href="{% url 'article:article_edit_page' article.id %}">修改文章</a>
        </div>
        <br/>
    {% endif %}
    </div>
{% endblock %}
{% block js_block %}
    <script>
        $(function () {
            var articleContent = $('.article-content');

            marked.setOptions({
                renderer: new marked.Renderer(),
                gfm: true,
                tables: true,
                breaks: false,
                pedantic: false,
                sanitize: false,
                smartLists: true,
                smartypants: false
            });

            if ("{{ article.editor }}" === "Markdown") {
                articleContent.html(marked(articleContent.text()));
            } else {
                articleContent.html(marked(articleContent.html()));
            }
            $('pre').each(function (i, block) {
                hljs.highlightBlock(block);
            });
            $('pre code').each(function (i, block) {
                hljs.highlightBlock(block);
            });
        });
    </script>
    <style type="text/css">

    </style>
{% endblock %}

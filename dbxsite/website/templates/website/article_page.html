{% extends 'website/base.html' %}
{% block title %}
    {{ article.title }}
{% endblock %}
{% block body_content %}
    <div class="container">
        <div class="row">
            <div class="h1">{{ article.title }}</div>
        </div>
        <div class="row">
            <p class="col-md-9">阅读：{{ article.access_count }}</p>
            <p class="col-md-3">发布时间：{{ article.publish_time }}</p>
        </div>
        <div class="row">
            <div class="col-md-12" style="background-color: gainsboro"></div>
        </div>
        <br/>
        <div class="row">
            <div id="article-content">{{ article.content }}</div>
        </div>
        <br/>
        <div class="row">
            <a class="btn btn-default" href="{% url 'article:article_edit_page' article.id %}">修改文章</a>
        </div>
        <br/>
    </div>
{% endblock %}
{% block js_block %}
    <script>
        $(function () {
            var articleContent = $('#article-content');

            marked.setOptions({
                renderer: new marked.Renderer(),
                gfm: true,
                tables: true,
                breaks: false,
                pedantic: false,
                sanitize: false,
                smartLists: true,
                smartypants: false
            });

            articleContent.html(marked(articleContent.html()));

            $('pre code').each(function (i, block) {
                hljs.highlightBlock(block);
            });
        });
    </script>
{% endblock %}